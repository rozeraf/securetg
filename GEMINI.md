# SecureTG - E2E Encrypted Telegram Bot

> Telegram –±–æ—Ç –¥–ª—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Signal Protocol –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–≤.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
secure-tg/
‚îú‚îÄ‚îÄ package.json              # Root workspace manager
‚îú‚îÄ‚îÄ pnpm-workspace.yaml       # PNPM workspace config
‚îú‚îÄ‚îÄ .prettierrc.json         # Prettier config
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ dev.sh              # Development launcher
‚îÇ   ‚îú‚îÄ‚îÄ build.sh            # Production builder
‚îÇ   ‚îî‚îÄ‚îÄ deploy.sh           # Deployment script
‚îú‚îÄ‚îÄ backend/                # Crypto & Database Service
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts        # Entry point
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ redis.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ env.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto/         # –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –º–æ–¥—É–ª—å
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ signal/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ protocol.ts    # Signal Protocol implementation
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ keys.ts        # Key management
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.ts     # Session management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cipher.ts          # AES-GCM encryption
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ kdf.ts            # Key derivation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database/       # –î–∞–Ω–Ω—ã–µ (–ù–ï –∫–ª—é—á–∏!)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ session.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ message.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repositories/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ userRepo.ts
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ sessionRepo.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache/          # Redis operations
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sessionCache.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messageQueue.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cryptoService.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sessionService.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ messageService.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/           # HTTP API –¥–ª—è frontend
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crypto.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth.ts
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ validation.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ logger.ts
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ errors.ts
‚îÇ   ‚îî‚îÄ‚îÄ prisma/            # Database schema
‚îÇ       ‚îú‚îÄ‚îÄ schema.prisma
‚îÇ       ‚îî‚îÄ‚îÄ migrations/
‚îî‚îÄ‚îÄ frontend/              # Telegram Bot Interface
    ‚îú‚îÄ‚îÄ package.json
    ‚îú‚îÄ‚îÄ tsconfig.json
    ‚îî‚îÄ‚îÄ src/
        ‚îú‚îÄ‚îÄ index.ts       # Bot entry point
        ‚îú‚îÄ‚îÄ bot/
        ‚îÇ   ‚îú‚îÄ‚îÄ handlers/  # Command handlers
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.ts
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ register.ts
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.ts
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.ts
        ‚îÇ   ‚îú‚îÄ‚îÄ keyboards/ # Inline keyboards
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.ts
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.ts
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.ts
        ‚îÇ   ‚îú‚îÄ‚îÄ middleware/
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.ts
        ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rateLimit.ts
        ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logging.ts
        ‚îÇ   ‚îî‚îÄ‚îÄ scenes/    # Conversation flows
        ‚îÇ       ‚îú‚îÄ‚îÄ registration.ts
        ‚îÇ       ‚îú‚îÄ‚îÄ chatSetup.ts
        ‚îÇ       ‚îî‚îÄ‚îÄ messaging.ts
        ‚îú‚îÄ‚îÄ services/      # Backend communication
        ‚îÇ   ‚îú‚îÄ‚îÄ apiClient.ts
        ‚îÇ   ‚îî‚îÄ‚îÄ cryptoClient.ts
        ‚îî‚îÄ‚îÄ utils/
            ‚îú‚îÄ‚îÄ formatter.ts
            ‚îî‚îÄ‚îÄ validator.ts
```

## üîß Tech Stack

### Backend
- **Node.js** + **TypeScript** - –æ—Å–Ω–æ–≤–∞
- **Fastify** - –±—ã—Å—Ç—Ä—ã–π HTTP —Å–µ—Ä–≤–µ—Ä
- **Prisma** - —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è ORM
- **PostgreSQL** - production-ready –ë–î —Å ACID –≥–∞—Ä–∞–Ω—Ç–∏—è–º–∏
- **Redis** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏
- **libsignal-protocol** - –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è
- **node-forge** - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è
- **zod** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ö–µ–º

### Frontend (Bot)
- **Grammy** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Telegram Bot framework
- **node-cron** - –∑–∞–¥–∞—á–∏ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
- **axios** - HTTP –∫–ª–∏–µ–Ω—Ç –¥–ª—è backend

### DevOps
- **PNPM** - package manager —Å workspaces
- **tsx** - TypeScript runner
- **Prettier** - code formatting
- **ESLint** - linting

## üîê –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞

### Signal Protocol Implementation
```typescript
// Double Ratchet + X3DH key agreement
User A                    Bot Relay                    User B
  |                         |                          |
  |--- Identity Keys ------>|<----- Identity Keys -----|
  |                         |                          |
  |--- Prekeys Exchange ----|                          |
  |                         |---- Prekeys Exchange --->|
  |                         |                          |
  |=== E2E Encrypted ======>|                          |
  |    Messages             |=== Forward Encrypted ===>|
  |                         |    (Bot can't decrypt)   |
```

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **Identity Keys** - –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ Ed25519 –∫–ª—é—á–∏
2. **Ephemeral Keys** - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ X25519 –∫–ª—é—á–∏
3. **Prekeys** - –Ω–∞–±–æ—Ä –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –∫–ª—é—á–µ–π
4. **Message Keys** - —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ AES-256-GCM –∫–ª—é—á–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
5. **Chain Keys** - –¥–ª—è forward secrecy

## üöÄ Development Workflow

### –ó–∞–ø—É—Å–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```fish
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pnpm install

# –ó–∞–ø—É—Å–∫ –≤ dev —Ä–µ–∂–∏–º–µ (–æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞)
pnpm dev

# –¢–æ–ª—å–∫–æ backend
pnpm dev:backend

# –¢–æ–ª—å–∫–æ frontend (bot)
pnpm dev:frontend
```

### –ü—Ä–æ–¥–∞–∫—à–Ω:
```fish
# –ë–∏–ª–¥ –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
pnpm build

# –ó–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
pnpm start
```

## üì¶ Workspace Configuration

### Root `package.json`:
```json
{
  "name": "secure-tg",
  "private": true,
  "scripts": {
    "dev": "concurrently \"pnpm dev:backend\" \"pnpm dev:frontend\"",
    "dev:backend": "pnpm --filter backend dev",
    "dev:frontend": "pnpm --filter frontend dev",
    "build": "pnpm --filter backend build && pnpm --filter frontend build",
    "start": "concurrently \"pnpm --filter backend start\" \"pnpm --filter frontend start\"",
    "lint": "pnpm --filter backend lint && pnpm --filter frontend lint",
    "format": "prettier --write ."
  },
  "devDependencies": {
    "concurrently": "^8.2.2",
    "prettier": "^3.1.0"
  }
}
```

### Backend `package.json`:
```json
{
  "name": "@secure-tg/backend",
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js",
    "db:generate": "prisma generate",
    "db:migrate": "prisma migrate dev",
    "db:deploy": "prisma migrate deploy",
    "db:studio": "prisma studio"
  },
  "dependencies": {
    "fastify": "^4.24.3",
    "@fastify/cors": "^8.4.0",
    "@fastify/redis": "^6.1.1",
    "prisma": "^5.6.0",
    "@prisma/client": "^5.6.0",
    "pg": "^8.11.3",
    "redis": "^4.6.10",
    "libsignal-protocol": "^2.3.3",
    "node-forge": "^1.3.1",
    "zod": "^3.22.4",
    "pino": "^8.16.2"
  },
  "devDependencies": {
    "@types/pg": "^8.10.7"
  }
}
```

### Frontend `package.json`:
```json
{
  "name": "@secure-tg/frontend",
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc",
    "start": "node dist/index.js"
  },
  "dependencies": {
    "grammy": "^1.20.3",
    "@grammyjs/conversations": "^1.2.0",
    "@grammyjs/menu": "^1.2.1",
    "axios": "^1.6.2",
    "node-cron": "^3.0.3"
  }
}
```

## üîÑ Message Flow

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. `/start` ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è Identity Key + Prekeys
2. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö –∫–ª—é—á–µ–π –≤ backend
3. –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–∞–Ω—Å–∞:
1. User A –≤—ã–±–∏—Ä–∞–µ—Ç User B –¥–ª—è —á–∞—Ç–∞
2. Backend –æ—Ç–¥–∞–µ—Ç prekey bundle –¥–ª—è User B
3. User A –≤—ã–ø–æ–ª–Ω—è–µ—Ç X3DH key agreement
4. –°–æ–∑–¥–∞–µ—Ç—Å—è Double Ratchet session

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:
1. User A —à–∏—Ñ—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
2. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π blob
3. –ë–æ—Ç –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç blob User B
4. User B –¥–µ—à–∏—Ñ—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

## üéØ UI/UX —á–µ—Ä–µ–∑ Inline Keyboards

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:
```
[ üí¨ –ù–æ–≤—ã–π —á–∞—Ç ]  [ üìù –ú–æ–∏ —á–∞—Ç—ã ]
[ ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ]  [ ‚ÑπÔ∏è –ü–æ–º–æ—â—å ]
```

### –ß–∞—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
```
[ üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å ]  [ üìÑ –ò—Å—Ç–æ—Ä–∏—è ]
[ üîí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–ª—é—á–∏ ]
[ ‚¨ÖÔ∏è –ù–∞–∑–∞–¥ ]
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ß—Ç–æ –ù–ï —Ö—Ä–∞–Ω–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
- ‚ùå –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚ùå –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚ùå Message keys –∏–ª–∏ chain keys

### –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è:
- ‚úÖ –ü—É–±–ª–∏—á–Ω—ã–µ identity keys
- ‚úÖ Prekey bundles  
- ‚úÖ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ message blobs (—Å TTL –≤ Redis)
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–π (PostgreSQL)
- ‚úÖ Rate limiting –¥–∞–Ω–Ω—ã–µ (Redis)

### Forward Secrecy:
- –ö–ª—é—á–∏ —Å–æ–æ–±—â–µ–Ω–∏–π —É–¥–∞–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏—è —Ç–µ–∫—É—â–∏—Ö –∫–ª—é—á–µ–π –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—à–ª—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è

### Post-Compromise Security:
- Double Ratchet –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–æ–≤—ã–µ –∫–ª—é—á–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–º–µ–Ω–µ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

## üìö Development Notes

### –ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:
- –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- Crypto –º–æ–¥—É–ª—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω
- API —Å–ª–æ–π –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω –æ—Ç bot –ª–æ–≥–∏–∫–∏

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```fish
pnpm test          # –í—Å–µ —Ç–µ—Å—Ç—ã
pnpm test:backend  # –¢–æ–ª—å–∫–æ backend
pnpm test:frontend # –¢–æ–ª—å–∫–æ frontend
```

### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```fish
pnpm lint    # ESLint –ø—Ä–æ–≤–µ—Ä–∫–∞
pnpm format  # Prettier —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

## üìù README Format

–í–æ—Ç –ø—Ä–∏–º–µ—Ä–Ω—ã–π README –≤ "—Ñ–æ—Ä–º–∞–ª—å–Ω–æ-—Ä–∞–∑–≥–æ–≤–æ—Ä—á–∏–≤–æ–º" —Å—Ç–∏–ª–µ:

```markdown
# SecureTG üîê

> –ù—É —á—Ç–æ, –Ω–∞–¥–æ–µ–ª–∏ –æ–±—ã—á–Ω—ã–µ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä—ã? –•–æ—á–µ—Ç—Å—è —á—Ç–æ-—Ç–æ –ø–æ—Å–µ—Ä—å–µ–∑–Ω–µ–µ? –î–µ—Ä–∂–∏ E2E –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π Telegram –±–æ—Ç –Ω–∞ –±–∞–∑–µ Signal Protocol.

## –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ?

–û–±—ã—á–Ω—ã–π Telegram –±–æ—Ç, –Ω–æ —Å twist'–æ–º - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —à–∏—Ñ—Ä—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ –±–æ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –∏—Ö –ø—Ä–æ—á–∏—Ç–∞—Ç—å. –î–∞, –ø—Ä—è–º –∫–∞–∫ –≤ Signal, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Telegram API.

### –§–∏—á–∏:
- üîí **Signal Protocol** - —Ç–æ—Ç —Å–∞–º—ã–π, —á—Ç–æ –≤ WhatsApp
- üîÑ **Double Ratchet** - forward secrecy –∏–∑ –∫–æ—Ä–æ–±–∫–∏  
- üö´ **Zero Knowledge** - —Å–µ—Ä–≤–µ—Ä –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Ç–≤–æ–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- üì± **Inline UI** - –Ω–∏–∫–∞–∫–∏—Ö –≤–µ–±-–º–æ—Ä–¥, —Ç–æ–ª—å–∫–æ –∫–Ω–æ–ø–æ—á–∫–∏
- ‚ö° **TypeScript** - –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∏–ø—ã —ç—Ç–æ —Å–≤—è—Ç–æ–µ

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```fish
# –ö–ª–æ–Ω–∏—Ä—É–µ–º
gh repo clone username/secure-tg
cd secure-tg


# –°—Ç–∞–≤–∏–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (PNPM ftw)
pnpm install

# –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º .env —Ñ–∞–π–ª—ã
cp backend/.env.example backend/.env
cp frontend/.env.example frontend/.env
# (–Ω–µ –∑–∞–±—É–¥—å BOT_TOKEN –æ—Ç @BotFather –∏ DATABASE_URL)

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
pnpm --filter backend db:migrate

# –ó–∞–ø—É—Å–∫–∞–µ–º –≤ dev —Ä–µ–∂–∏–º–µ
pnpm dev
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–∞–≥–∏—è?

1. –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—à—å—Å—è –≤ –±–æ—Ç–µ ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–ª—é—á–∏
2. –í—ã–±–∏—Ä–∞–µ—à—å —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ ‚Üí –æ–±–º–µ–Ω–∏–≤–∞–µ—Ç–µ—Å—å –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏  
3. –ü–∏—à–µ—à—å —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Üí –æ–Ω–æ —à–∏—Ñ—Ä—É–µ—Ç—Å—è —É —Ç–µ–±—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
4. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—É—é –∫–∞–∫—É ‚Üí –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç –∫–∞–∫ –µ—Å—Ç—å
5. –°–æ–±–µ—Å–µ–¥–Ω–∏–∫ –ø–æ–ª—É—á–∞–µ—Ç ‚Üí –¥–µ—à–∏—Ñ—Ä—É–µ—Ç —É —Å–µ–±—è

**–í–∞–∂–Ω–æ:** –±–æ—Ç –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–±—ã. –î–∞–∂–µ –µ—Å–ª–∏ –µ–≥–æ –≤–∑–ª–æ–º–∞—é—Ç –∏–ª–∏ –∑–∞—Å–µ–∫—å—é—Ä—è—Ç - —Ç–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Å—Ç–∞–Ω—É—Ç—Å—è –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `backend/` - –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è –∏ API (Fastify + Prisma)
- `frontend/` - —Å–∞–º Telegram –±–æ—Ç (Grammy)
- `scripts/` - –≤—Å—è–∫–∏–µ —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

–ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∂–∏–≤–µ—Ç —Å–≤–æ–µ–π –∂–∏–∑–Ω—å—é, –Ω–æ –¥—Ä—É–∂–∞—Ç —á–µ—Ä–µ–∑ HTTP API.

## FAQ

**Q: –≠—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?**  
A: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π Signal Protocol. –ï—Å–ª–∏ –µ–≥–æ –≤–∑–ª–æ–º–∞—é—Ç - —É –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º—ã, –Ω–µ —Ç–æ–ª—å–∫–æ —É –Ω–∞—Å.

**Q: –ê —á—Ç–æ –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä —Å–∫–æ–º–ø—Ä–æ–º–µ—Ç–∏—Ä—É—é—Ç?**  
A: –ú–∞–∫—Å–∏–º—É–º —á—Ç–æ –ø–æ–ª—É—á–∞—Ç - –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –±–ª–æ–±—ã –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ. –°–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ —Ä–∞—Å—à–∏—Ñ—Ä—É—é—Ç.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –¥–æ–≤–µ—Ä—è—Ç—å –∫–æ–¥—É?**  
A: –ö–æ–¥ –æ—Ç–∫—Ä—ã—Ç—ã–π, –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è. –ü—Ä–æ–≤–µ—Ä—è–π —Å–∞–º –∏–ª–∏ –Ω–∞–π–º–∏ –∞—É–¥–∏—Ç–æ—Ä–æ–≤.

**Q: –ü–æ—á–µ–º—É –Ω–µ P2P?**  
A: NAT traversal —ç—Ç–æ pain, –∞ Telegram API —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–æ–±–∫–∏. –ö–æ–º–ø—Ä–æ–º–∏—Å—Å –≤ –ø–æ–ª—å–∑—É –ø—Ä–æ—Å—Ç–æ—Ç—ã.

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
pnpm dev          # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã  
pnpm dev:backend  # –¢–æ–ª—å–∫–æ API
pnpm dev:frontend # –¢–æ–ª—å–∫–æ –±–æ—Ç
pnpm build        # –ë–∏–ª–¥ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
pnpm lint         # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
pnpm format       # Prettier magic
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

**GPL v3** - –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–≤–æ–±–æ–¥–∞ –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å–≤–æ–±–æ–¥–Ω–æ–π.

–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∞–µ—Ç:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π –∫–∞–∫ —Ö–æ—á–µ—à—å
- ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π –∫–æ–¥  
- ‚úÖ –ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
- ‚ö†Ô∏è **–ù–û:** –ª—é–±—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ç–æ–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å GPL
- ‚ö†Ô∏è **–ò:** –µ—Å–ª–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—à—å –≤ —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç - –æ–Ω —Ç–æ–∂–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è GPL

```

–≠—Ç–æ –ø—Ä–æ–¥—É–º–∞–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è enterprise-level Telegram –±–æ—Ç–∞ —Å end-to-end —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º, –∫–æ—Ç–æ—Ä–∞—è –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏.